# ARP协议
## feature
ARP为IP地址到对应的硬件地址之间提供动态映射  
32bit ip address -> 48bit ether address  
## ARP工作过程
1.dns将主机名转换成32位ip地址 gethostbyname()  
2.请求tcp与ip地址建立连接  
3.tcp发送一个连接请求分段到远端的主机，即向上述IP地址发送一份IP数据报  
4.如果目的主机在本地网络上（如以太网、令牌环网或点对点链接的另一端）,那么IP数据报可以直接送到目的主机上。如果目的主机在一个远程网络上，那么就通过IP选路函数来确定位于本地网络上的下一站路由器地址，并让它转发IP数据报。在这两种情况下，IP数据报都是被送到位于本地网络上的一台主机或路由器  
5.若目的主机在以太网，那么发送端主机必须把32 bit的IP地址变换成48 bit的以太网地址。从逻辑Internet地址到对应的物理硬件地址需要进行翻译。这就是ARP的功能  
6.ARP发送一份称作ARP请求的以太网数据帧给以太网上的每个主机。这个过程称作广播，ARP请求数据帧中包含目的主机的IP地址，其意思是“如果你是这个IP地址的拥有者，请回答你的硬件地址“  
7.目的主机的ARP层收到这份广播报文后，识别出这是发送端在寻问它的IP地址，于是发送一个ARP应答。这个ARP应答包含IP地址及对应的硬件地址  
8.收到ARP应答后，使用ARP获得的IP数据报现在就可以传送了  
9.发送IP数据报到目的主机
## ARP协议背后的基本概念
网络接口有一个硬件地址（一个48 bit的值，标识不同的以太网或令牌环网络接口）。在硬件层次上进行的数据帧交换必须有正确的接口地址。但是，TCP/IP有自己的地址：32 bit的IP地址。知道主机的IP地址并不能让内核发送一帧数据给主机。内核（如以太网驱动程序）必须知道目的端的硬件地址才能发送数据。ARP的功能是在32 bit的IP地址和采用不同网络技术的硬件地址之间提供动态映射
